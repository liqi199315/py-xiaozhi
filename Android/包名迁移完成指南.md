# 包名迁移完成 - 安装指南

## 迁移状态
✅ 代码包名已从 `com.xiaozhi.app` 迁移到 `com.eshowcaseai.app`

## 必须执行的步骤

### 1. 卸载旧版本应用
```bash
# 方法一: 使用 adb 命令
adb uninstall com.xiaozhi.app

# 方法二: 在设备上手动卸载
# 设置 -> 应用 -> 找到旧应用 -> 卸载
```

### 2. 清理构建缓存
```bash
cd Android
./gradlew clean
# 或在 Android Studio 中: Build -> Clean Project
```

### 3. 重新构建并安装
```bash
# 方法一: 使用 Android Studio
# Build -> Rebuild Project
# Run -> Run 'app'

# 方法二: 使用命令行
./gradlew installDebug
```

### 4. 验证安装
```bash
# 检查已安装的包名
adb shell pm list packages | grep eshowcaseai

# 应该看到:
# package:com.eshowcaseai.app
```

## 注意事项

⚠️ **数据丢失警告**:
- 卸载旧应用会**清除所有应用数据**
- 包括: SharedPreferences、数据库、内部存储的文件
- 如果需要保留设备身份等数据，请在卸载前备份

### 备份设备身份数据
```bash
# 备份 SharedPreferences
adb pull /data/data/com.xiaozhi.app/shared_prefs/EShowcaseAI_identity.xml

# 卸载并安装新版本后恢复
adb push EShowcaseAI_identity.xml /data/data/com.eshowcaseai.app/shared_prefs/
```

## 两个应用共存方案 (可选)

如果您需要新旧版本同时安装进行测试:

1. 新版本使用 `com.eshowcaseai.app` (已完成)
2. 保留旧版本的 APK 不卸载
3. 两个应用可以同时安装和运行，互不影响

## 常见问题

### Q: 为什么进程名还是 com.xiaozhi.app?
**A:** 您查看的是旧版本应用的进程。需要先卸载旧应用，再安装新版本。

### Q: 安装失败提示"签名不一致"?
**A:** 确保使用相同的签名密钥，或者先卸载旧版本。

### Q: 如何确认当前运行的是哪个版本?
**A:**
```bash
# 查看当前运行的进程
adb shell ps | grep eshowcaseai

# 查看应用版本
adb shell dumpsys package com.eshowcaseai.app | grep versionName
```

## 迁移检查清单

- [x] build.gradle.kts namespace 更新
- [x] build.gradle.kts applicationId 更新
- [x] 源代码目录结构迁移 (com/xiaozhi -> com/eshowcaseai)
- [x] 所有 import 语句更新
- [x] XML 配置文件更新
- [ ] **卸载设备上的旧应用** ⚠️ 您需要完成这一步
- [ ] **重新安装新版本应用**
- [ ] **验证新版本运行正常**
